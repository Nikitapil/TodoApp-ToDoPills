let modalContainer=document.querySelector(".modal__container");function showModal(t){modalContainer.classList.toggle("hidden"),t.classList.toggle("hidden")}let todoContainer=document.querySelector(".todo__container");localStorage.getItem("elements")&&(todoContainer.innerHTML=localStorage.getItem("elements"));const notesList=document.querySelector(".notes__list");localStorage.getItem("noteList")&&(notesList.innerHTML=localStorage.getItem("noteList"));let addButton=document.querySelector(".todo__addBtn"),addModal=document.querySelector(".modal__add"),addModalCancel=document.querySelector(".modal__cancel__addbtn");addButton.addEventListener("click",()=>showModal(addModal)),addModalCancel.addEventListener("click",()=>showModal(addModal));let addItemBtn=document.querySelector(".modal__add__addbtn"),titleInput=document.querySelector(".todo__title__input"),descriptionInput=document.querySelector(".todo__comment__input"),mainBlock=document.querySelector(".todo__main__content");function addItem(){let t=document.createElement("div");t.draggable=!0;let e=new Date,o=e.getDate()+"."+(e.getMonth()+1)+"."+e.getFullYear();t.classList.add("todo__item"),t.innerHTML=`<h4 class="todo__item__header">${titleInput.value}</h4>\n    <div class="todo__item__buttons">\n        <button class="inprogress__button" title="В процессе"></button>\n        <button class="delete__button" title="Удалить"></button>\n        <button class="inmain__button" title="В невыполненные"></button>\n        <button class="indone__button" title="В выполненные"></button>\n    </div>\n    <p class="todo__item__description">${descriptionInput.value}</p>\n    <p class="todo__item__date">${o}</p>\n    <button class="item__show"><span>Показать</span></button>`,mainBlock.append(t),showModal(addModal),localStorage.setItem("elements",todoContainer.innerHTML),counters()}addItemBtn.addEventListener("click",addItem);let inprogressBlock=document.querySelector(".todo__inprogress__content"),doneBlock=document.querySelector(".todo__done__content"),trashBlock=document.querySelector(".todo__trash__content"),deleteModal=document.querySelector(".modal__delete"),delCancelBtn=document.querySelector(".modal__delete__cancelbtn");function changeBlock(t,e){let o=t.closest(".todo__item");e.append(o),localStorage.setItem("elements",todoContainer.innerHTML),counters()}delCancelBtn.addEventListener("click",()=>showModal(deleteModal)),todoContainer.addEventListener("click",(function(t){if(t.target.classList.contains("inprogress__button"))changeBlock(t.target,inprogressBlock);else if(t.target.classList.contains("inmain__button"))changeBlock(t.target,mainBlock);else if(t.target.classList.contains("indone__button"))changeBlock(t.target,doneBlock);else if(t.target.classList.contains("delete__button"))if(t.target.closest(".todo__item").parentElement.classList.contains("todo__trash__content")){showModal(deleteModal),document.querySelector(".modal__delete__deletebtn").onclick=function(){t.target.closest(".todo__item").remove(),localStorage.setItem("elements",todoContainer.innerHTML),counters(),showModal(deleteModal)}}else changeBlock(t.target,trashBlock);else t.target.classList.contains("todo__clear")&&(t.target.closest(".todo__block").querySelector(".todo__content").innerHTML="",localStorage.setItem("elements",todoContainer.innerHTML),counters())}));let todoBlocks=document.querySelectorAll(".todo__block");function counters(){todoBlocks.forEach(t=>{let e=t.querySelector(".todo__counter"),o=t.querySelector(".todo__content");e.textContent=o.children.length})}todoBlocks.forEach(t=>{t.addEventListener("dragstart",(function(t){t.target.classList.add("dragnow")})),t.addEventListener("dragend",(function(t){t.target.classList.remove("dragnow")})),t.addEventListener("dragover",(function(t){t.preventDefault()})),t.addEventListener("drop",(function(e){e.preventDefault();let o=document.querySelector(".dragnow");if(null!=o){t.querySelector(".todo__content").append(o)}counters()}))}),counters();let editModal=document.querySelector(".modal__edit");todoContainer.addEventListener("click",(function(t){if(t.target.classList.contains("item__show")){let e=t.target.closest(".todo__item").querySelector(".todo__item__header").textContent,o=t.target.closest(".todo__item").querySelector(".todo__item__description").textContent;editModal.innerHTML=`\n    <h2>${e}</h2>\n            <p>${o}</p>\n            <div class="modal__edit__buttons">\n                <button type="button" class="modal__edit__editbtn">Редактировать</button>\n                <button type="button" class="modal__cancel__editbtn">Закрыть</button>\n            </div>\n    `,document.querySelector(".modal__cancel__editbtn").addEventListener("click",()=>showModal(editModal)),document.querySelector(".modal__edit__editbtn").onclick=function(){editModal.innerHTML=`\n        <label for="edit__header">Название</label>\n    <input type="text" value="${e}" id="edit__header">\n    <label for="edit__comment">Описание</label>\n            <textarea id="edit__comment">${o}</textarea>\n            <div class="modal__edit__buttons">\n                <button type="button" class="modal__save__editbtn">Сохранить</button>\n                <button type="button" class="modal__cancel__editbtn">Закрыть</button>\n            </div>\n    `,document.querySelector(".modal__cancel__editbtn").addEventListener("click",()=>showModal(editModal));let n=document.getElementById("edit__header"),l=document.getElementById("edit__comment");document.querySelector(".modal__save__editbtn").addEventListener("click",(function(){t.target.closest(".todo__item").querySelector(".todo__item__header").textContent=n.value,t.target.closest(".todo__item").querySelector(".todo__item__description").textContent=l.value,localStorage.setItem("elements",todoContainer.innerHTML),showModal(editModal)}))},showModal(editModal)}}));let aboutBtn=document.querySelector(".about__btn"),aboutModal=document.querySelector(".modal__about"),aboutCloseBtn=document.querySelector(".modal__about__closeBtn");aboutBtn.addEventListener("click",()=>showModal(aboutModal)),aboutCloseBtn.addEventListener("click",()=>showModal(aboutModal));let instructionBtn=document.querySelector(".instruction__btn"),instructionModal=document.querySelector(".modal__instruction"),instructionCloseBtn=document.querySelector(".modal__instruction__closeBtn");instructionBtn.addEventListener("click",()=>showModal(instructionModal)),instructionCloseBtn.addEventListener("click",()=>showModal(instructionModal));let burgerMenu=document.querySelector(".burgermenu"),navMenu=document.querySelector(".header_nav_list"),header=document.querySelector(".header");header.addEventListener("click",(function(t){(t.target.closest(".burgermenu")||t.target.closest(".header_nav_list_item"))&&(burgerMenu.classList.toggle("active"),navMenu.classList.toggle("active"),header.classList.toggle("active"),console.log(t.target))}));let searchBtn=document.querySelector(".todo__searchbutton"),searchInput=document.querySelector(".todo__searchInput"),searchModal=document.querySelector(".modal__search");searchBtn.onclick=function(){let t=document.querySelectorAll(".todo__item"),e=searchModal.innerHTML,o=Array.from(t).filter(t=>t.querySelector(".todo__item__header").textContent.toLocaleLowerCase()==searchInput.value.toLocaleLowerCase()).map(t=>{let e=t.cloneNode(!0);return e.querySelectorAll("button").forEach(t=>t.remove()),e});o.length>0?(showModal(searchModal),searchModal.append(...o)):alert("Ничего не найдено"),document.querySelector(".modal__search__closeBtn").onclick=function(){searchModal.innerHTML=e,showModal(searchModal)}};const calcButtons=document.querySelector(".calc__buttons"),calcScreen=document.querySelector(".calc__input"),calcOutput=document.querySelector(".calc__output"),modalCalc=document.querySelector(".modal__calc");document.addEventListener("click",(function(t){t.target.closest(".calc__open")&&showModal(modalCalc),t.target.closest(".modal__calc__closeBtn")&&showModal(modalCalc)})),calcButtons.addEventListener("click",(function(e){let targetEl=e.target;if(targetEl.closest(".calc__btn")&&(calcScreen.value+=targetEl.value,calcOutput.textContent+=targetEl.value),targetEl.closest(".calc__delall")&&(calcOutput.textContent=calcOutput.textContent.slice(0,-1),calcScreen.value=calcScreen.value.slice(0,-1)),targetEl.closest(".calc__del")&&(calcScreen.value="",calcOutput.textContent=""),targetEl.closest(".calc__funcbtn")){const t=Array.from(document.querySelectorAll(".calc__funcbtn")).map(t=>t.value);let e=calcOutput.textContent[calcOutput.textContent.length-1];if(console.log(t.includes(e)),t.includes(e))calcOutput.textContent=calcOutput.textContent.slice(0,-1),calcOutput.textContent+=targetEl.value,calcScreen.value="";else{if(""==calcOutput.textContent)return;calcOutput.textContent+=targetEl.value,calcScreen.value=""}}if(targetEl.closest(".calc__ebtn")){let calcResult=calcOutput.textContent.replace("%","/100*");calcScreen.value.includes(".")?calcScreen.value=eval(calcResult).toFixed(5):calcScreen.value=eval(calcResult),calcOutput.textContent=calcScreen.value}}));const notes=document.querySelector(".notes"),notesAddBtn=document.querySelector(".notes__creator__newbtn"),notesCreator=document.querySelector(".notes__creator__body");function toggleHidden(t){t.classList.toggle("hidden")}notes.addEventListener("click",(function(t){let e=t.target;if((e.closest(".notes__creator__newbtn")||e.closest(".creator__cancel-btn"))&&(toggleHidden(notesAddBtn),toggleHidden(notesCreator)),e.closest(".creator__save-btn")){const t=document.querySelector(".creator__body__title"),e=document.querySelector(".creator__body__text");let o=document.createElement("li");o.classList.add("notes__list__item"),o.innerHTML=`<h3 class="notes__item__title">${t.value?t.value:"Заметка"}</h3>\n    <p class="notes__item__text">${e.value}</p>\n    <button class="notes__del-btn"></button>\n    `,notesList.append(o),t.value="",e.value="",toggleHidden(notesAddBtn),toggleHidden(notesCreator),localStorage.setItem("noteList",notesList.innerHTML)}e.closest(".notes__del-btn")&&(e.closest(".notes__list__item").remove(),localStorage.setItem("noteList",notesList.innerHTML))}));